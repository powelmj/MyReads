{"ast":null,"code":"var _jsxFileName = \"/home/matt/Documents/MyReads/src/Search.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport * as BooksAPI from \"./BooksAPI\";\nimport Book from \"./Book\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Search = ({\n  books,\n  updateBookShelf,\n  onClose\n}) => {\n  _s();\n  const [query, setQuery] = useState(\"\");\n  const [searchResults, setSearchResults] = useState([]);\n  useEffect(() => {\n    if (query.length >= 3) {\n      const timer = setTimeout(() => {\n        BooksAPI.search(query, 20).then(results => {\n          if (results.error) {\n            setSearchResults([]);\n          } else {\n            const updatedResults = results.map(result => {\n              const bookOnShelf = books.find(b => b.id === result.id);\n              return bookOnShelf ? {\n                ...result,\n                shelf: bookOnShelf.shelf\n              } : {\n                ...result,\n                shelf: \"none\"\n              };\n            });\n            setSearchResults(updatedResults);\n          }\n        }).catch(() => setSearchResults([]));\n      }, 300);\n      return () => clearTimeout(timer);\n    } else {\n      setSearchResults([]);\n    }\n  }, [query, books]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"search-books\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-books-bar\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"close-search\",\n        onClick: () => navigate(\"/\"),\n        children: \"Close\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-books-input-wrapper\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Search by title, author, or ISBN\",\n          value: query,\n          onChange: e => setQuery(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-books-results\",\n      children: /*#__PURE__*/_jsxDEV(\"ol\", {\n        className: \"books-grid\",\n        children: searchResults.map(book => /*#__PURE__*/_jsxDEV(Book, {\n          book: book,\n          updateBookShelf: updateBookShelf\n        }, book.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 17\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 9\n  }, this);\n};\n_s(Search, \"g4k7gpLZ0x8piIefvCYJI6aPYzw=\");\n_c = Search;\nSearch.propTypes = {\n  books: PropTypes.array.isRequired,\n  updateBookShelf: PropTypes.func.isRequired\n};\nexport default Search;\nvar _c;\n$RefreshReg$(_c, \"Search\");","map":{"version":3,"names":["useState","useEffect","PropTypes","BooksAPI","Book","jsxDEV","_jsxDEV","Search","books","updateBookShelf","onClose","_s","query","setQuery","searchResults","setSearchResults","length","timer","setTimeout","search","then","results","error","updatedResults","map","result","bookOnShelf","find","b","id","shelf","catch","clearTimeout","className","children","onClick","navigate","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","value","onChange","e","target","book","_c","propTypes","array","isRequired","func","$RefreshReg$"],"sources":["/home/matt/Documents/MyReads/src/Search.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport * as BooksAPI from \"./BooksAPI\";\nimport Book from \"./Book\";\n\nconst Search=({books,updateBookShelf,onClose})=>{\n    const [query, setQuery] = useState(\"\");\n    const [searchResults, setSearchResults] = useState([]);\n\n\n    useEffect(() => {\n        if (query.length >= 3) {\n          const timer = setTimeout(() => {\n            BooksAPI.search(query, 20)\n              .then((results) => {\n                if (results.error) {\n                  setSearchResults([]);\n                } else {\n                  const updatedResults = results.map((result) => {\n                    const bookOnShelf = books.find((b) => b.id === result.id);\n                    return bookOnShelf ? { ...result, shelf: bookOnShelf.shelf } : { ...result, shelf: \"none\" };\n                  });\n                  setSearchResults(updatedResults);\n                }\n              })\n              .catch(() => setSearchResults([]));\n          }, 300);\n    \n          return () => clearTimeout(timer);\n        } else {\n          setSearchResults([]);\n        }\n      }, [query, books]);\n\n      return (\n        <div className=\"search-books\">\n          <div className=\"search-books-bar\">\n            <button className=\"close-search\" onClick={() => navigate(\"/\")}>\n              Close\n            </button>\n            <div className=\"search-books-input-wrapper\">\n              <input\n                type=\"text\"\n                placeholder=\"Search by title, author, or ISBN\"\n                value={query}\n                onChange={(e) => setQuery(e.target.value)}\n              />\n            </div>\n          </div>\n          <div className=\"search-books-results\">\n            <ol className=\"books-grid\">\n              {searchResults.map((book) => (\n                <Book\n                  key={book.id}\n                  book={book}\n                  updateBookShelf={updateBookShelf}\n                />\n              ))}\n            </ol>\n          </div>\n        </div>\n      );\n    };\n    \n    Search.propTypes = {\n      books: PropTypes.array.isRequired,\n      updateBookShelf: PropTypes.func.isRequired,\n    };\nexport default Search;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}